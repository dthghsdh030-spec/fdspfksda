--[[ 
    ═══════════════════════════════════════════════════════════════
    CASUAL HUB - ADVANCED GUI LIBRARY
    ═══════════════════════════════════════════════════════════════
    
    A modern, lightweight GUI library for Roblox scripts
    Built with ease-of-use and powerful features in mind
    
    ═══════════════════════════════════════════════════════════════
]]--

local CasualHub = {}
CasualHub.Windows = {}
CasualHub.Version = "1.0.0"
CasualHub.AccentColor = Color3.fromRGB(138, 92, 246)
CasualHub.Theme = "Dark"
CasualHub.ThemeCallbacks = {}

-- ═══════════════════════════════════════════════════════════════
-- CORE FUNCTIONS
-- ═══════════════════════════════════════════════════════════════

function CasualHub:CreateWindow(config)
    config = config or {}
    
    local Window = {
        Title = config.Title or "Casual Hub",
        SubTitle = config.SubTitle or "v" .. CasualHub.Version,
        Logo = config.Logo or "CH",
        ToggleKey = config.ToggleKey or Enum.KeyCode.K,
        Tabs = {},
        Visible = true,
        Dragging = false,
        DragStart = nil,
        DragOffset = nil,
        Position = UDim2.new(0, 100, 0, 100),
    }
    
    -- Services
    local UserInputService = game:GetService("UserInputService")
    local RunService = game:GetService("RunService")
    
    -- Create main window frame
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "CasualHub_" .. config.Title
    ScreenGui.ResetOnSpawn = false
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    
    -- Main window container
    local WindowFrame = Instance.new("Frame")
    WindowFrame.Name = "MainWindow"
    WindowFrame.Size = UDim2.new(0, 600, 0, 400)
    WindowFrame.Position = Window.Position
    WindowFrame.BackgroundColor3 = Color3.fromRGB(31, 33, 33)
    WindowFrame.BorderSizePixel = 1
    WindowFrame.BorderColor3 = Color3.fromRGB(50, 50, 60)
    WindowFrame.Parent = ScreenGui
    
    -- Corner radius with UICorner
    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 10)
    UICorner.Parent = WindowFrame
    
    -- Add shadow effect
    local UIShadow = Instance.new("UIStroke")
    UIShadow.Color = Color3.fromRGB(0, 0, 0)
    UIShadow.Thickness = 2
    UIShadow.Transparency = 0.8
    UIShadow.Parent = WindowFrame
    
    -- Header
    local Header = Instance.new("Frame")
    Header.Name = "Header"
    Header.Size = UDim2.new(1, 0, 0, 50)
    Header.BackgroundColor3 = Color3.fromRGB(19, 52, 59)
    Header.BorderSizePixel = 0
    Header.Parent = WindowFrame
    
    -- Header corner radius
    local HeaderCorner = Instance.new("UICorner")
    HeaderCorner.CornerRadius = UDim.new(0, 10)
    HeaderCorner.Parent = Header
    
    -- Logo
    local LogoLabel = Instance.new("TextLabel")
    LogoLabel.Name = "Logo"
    LogoLabel.Size = UDim2.new(0, 40, 0, 40)
    LogoLabel.Position = UDim2.new(0, 10, 0, 5)
    LogoLabel.BackgroundColor3 = CasualHub.AccentColor
    LogoLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    LogoLabel.TextSize = 18
    LogoLabel.Font = Enum.Font.GothamBold
    LogoLabel.Text = Window.Logo
    LogoLabel.Parent = Header
    
    -- Logo corner
    local LogoCorner = Instance.new("UICorner")
    LogoCorner.CornerRadius = UDim.new(0, 6)
    LogoCorner.Parent = LogoLabel
    
    -- Title
    local TitleLabel = Instance.new("TextLabel")
    TitleLabel.Name = "Title"
    TitleLabel.Size = UDim2.new(0, 300, 0, 25)
    TitleLabel.Position = UDim2.new(0, 60, 0, 8)
    TitleLabel.BackgroundTransparency = 1
    TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    TitleLabel.TextSize = 16
    TitleLabel.Font = Enum.Font.GothamBold
    TitleLabel.Text = Window.Title
    TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
    TitleLabel.Parent = Header
    
    -- Subtitle
    local SubTitleLabel = Instance.new("TextLabel")
    SubTitleLabel.Name = "SubTitle"
    SubTitleLabel.Size = UDim2.new(0, 300, 0, 18)
    SubTitleLabel.Position = UDim2.new(0, 60, 0, 25)
    SubTitleLabel.BackgroundTransparency = 1
    SubTitleLabel.TextColor3 = Color3.fromRGB(150, 150, 160)
    SubTitleLabel.TextSize = 12
    SubTitleLabel.Font = Enum.Font.Gotham
    SubTitleLabel.Text = Window.SubTitle
    SubTitleLabel.TextXAlignment = Enum.TextXAlignment.Left
    SubTitleLabel.Parent = Header
    
    -- Close button
    local CloseButton = Instance.new("TextButton")
    CloseButton.Name = "CloseButton"
    CloseButton.Size = UDim2.new(0, 30, 0, 30)
    CloseButton.Position = UDim2.new(1, -40, 0, 10)
    CloseButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    CloseButton.TextSize = 14
    CloseButton.Font = Enum.Font.GothamBold
    CloseButton.Text = "×"
    CloseButton.Parent = Header
    
    local CloseCorner = Instance.new("UICorner")
    CloseCorner.CornerRadius = UDim.new(0, 4)
    CloseCorner.Parent = CloseButton
    
    CloseButton.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)
    
    -- Content area with tabs
    local ContentFrame = Instance.new("Frame")
    ContentFrame.Name = "Content"
    ContentFrame.Size = UDim2.new(1, 0, 1, -50)
    ContentFrame.Position = UDim2.new(0, 0, 0, 50)
    ContentFrame.BackgroundColor3 = Color3.fromRGB(31, 33, 33)
    ContentFrame.BorderSizePixel = 0
    ContentFrame.Parent = WindowFrame
    
    -- Tabs container
    local TabsContainer = Instance.new("Frame")
    TabsContainer.Name = "TabsContainer"
    TabsContainer.Size = UDim2.new(0, 150, 1, 0)
    TabsContainer.Position = UDim2.new(0, 0, 0, 0)
    TabsContainer.BackgroundColor3 = Color3.fromRGB(25, 27, 27)
    TabsContainer.BorderSizePixel = 1
    TabsContainer.BorderColor3 = Color3.fromRGB(50, 50, 60)
    TabsContainer.Parent = ContentFrame
    
    -- Tabs list
    local TabsList = Instance.new("UIListLayout")
    TabsList.Padding = UDim.new(0, 0)
    TabsList.Parent = TabsContainer
    
    -- Content display area
    local ContentDisplay = Instance.new("Frame")
    ContentDisplay.Name = "ContentDisplay"
    ContentDisplay.Size = UDim2.new(1, -150, 1, 0)
    ContentDisplay.Position = UDim2.new(0, 150, 0, 0)
    ContentDisplay.BackgroundColor3 = Color3.fromRGB(31, 33, 33)
    ContentDisplay.BorderSizePixel = 0
    ContentDisplay.Parent = ContentFrame
    
    -- Scroll frame for content
    local ScrollFrame = Instance.new("ScrollingFrame")
    ScrollFrame.Name = "ScrollFrame"
    ScrollFrame.Size = UDim2.new(1, -10, 1, -10)
    ScrollFrame.Position = UDim2.new(0, 5, 0, 5)
    ScrollFrame.BackgroundTransparency = 1
    ScrollFrame.BorderSizePixel = 0
    ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
    ScrollFrame.ScrollBarThickness = 4
    ScrollFrame.ScrollBarImageColor3 = CasualHub.AccentColor
    ScrollFrame.Parent = ContentDisplay
    
    local ContentLayout = Instance.new("UIListLayout")
    ContentLayout.Padding = UDim.new(0, 8)
    ContentLayout.Parent = ScrollFrame
    
    -- Dragging
    local function MakeDraggable(frame)
        local dragging = false
        local dragInput
        local dragStart
        local startPos
        
        frame.InputBegan:Connect(function(input, gameProcessed)
            if gameProcessed then return end
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = true
                dragStart = input.Position
                startPos = frame.Position
            end
        end)
        
        frame.InputEnded:Connect(function(input, gameProcessed)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = false
            end
        end)
        
        UserInputService.InputChanged:Connect(function(input, gameProcessed)
            if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                local delta = input.Position - dragStart
                frame.Position = UDim2.new(
                    startPos.X.Scale,
                    startPos.X.Offset + delta.X,
                    startPos.Y.Scale,
                    startPos.Y.Offset + delta.Y
                )
            end
        end)
    end
    
    MakeDraggable(WindowFrame)
    
    -- Toggle visibility with key
    UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if gameProcessed then return end
        if input.KeyCode == Window.ToggleKey then
            Window.Visible = not Window.Visible
            WindowFrame.Visible = Window.Visible
        end
    end)
    
    -- Tab creation function
    function Window:CreateTab(config)
        config = config or {}
        
        local Tab = {
            Name = config.Name or "Tab",
            Icon = config.Icon or "",
            Sections = {},
        }
        
        -- Create tab button
        local TabButton = Instance.new("TextButton")
        TabButton.Name = Tab.Name
        TabButton.Size = UDim2.new(1, 0, 0, 40)
        TabButton.BackgroundColor3 = Color3.fromRGB(40, 42, 42)
        TabButton.TextColor3 = Color3.fromRGB(150, 150, 160)
        TabButton.TextSize = 12
        TabButton.Font = Enum.Font.Gotham
        TabButton.Text = "  " .. Tab.Name
        TabButton.TextXAlignment = Enum.TextXAlignment.Left
        TabButton.BorderSizePixel = 0
        TabButton.Parent = TabsContainer
        
        -- Create content frame for this tab
        local TabContent = Instance.new("Frame")
        TabContent.Name = "TabContent_" .. Tab.Name
        TabContent.Size = UDim2.new(1, 0, 1, 0)
        TabContent.BackgroundTransparency = 1
        TabContent.BorderSizePixel = 0
        TabContent.Visible = false
        TabContent.Parent = ScrollFrame
        
        local TabLayout = Instance.new("UIListLayout")
        TabLayout.Padding = UDim.new(0, 8)
        TabLayout.Parent = TabContent
        
        -- Set default tab
        if #Window.Tabs == 0 then
            TabButton.BackgroundColor3 = CasualHub.AccentColor
            TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            TabContent.Visible = true
        end
        
        -- Tab click handler
        TabButton.MouseButton1Click:Connect(function()
            for _, btn in ipairs(TabsContainer:GetChildren()) do
                if btn:IsA("GuiButton") then
                    btn.BackgroundColor3 = Color3.fromRGB(40, 42, 42)
                    btn.TextColor3 = Color3.fromRGB(150, 150, 160)
                end
            end
            
            for _, frame in ipairs(ScrollFrame:GetChildren()) do
                if frame:IsA("Frame") and frame.Name:find("TabContent_") then
                    frame.Visible = false
                end
            end
            
            TabButton.BackgroundColor3 = CasualHub.AccentColor
            TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            TabContent.Visible = true
        end)
        
        -- Section creation
        function Tab:CreateSection(config)
            config = config or {}
            
            local Section = {
                Name = config.Name or "Section",
                Elements = {},
            }
            
            -- Create section label
            local SectionLabel = Instance.new("TextLabel")
            SectionLabel.Name = "SectionLabel"
            SectionLabel.Size = UDim2.new(1, 0, 0, 30)
            SectionLabel.BackgroundColor3 = Color3.fromRGB(25, 27, 27)
            SectionLabel.TextColor3 = CasualHub.AccentColor
            SectionLabel.TextSize = 12
            SectionLabel.Font = Enum.Font.GothamBold
            SectionLabel.Text = "  " .. Section.Name:upper()
            SectionLabel.TextXAlignment = Enum.TextXAlignment.Left
            SectionLabel.BorderSizePixel = 0
            SectionLabel.Parent = TabContent
            
            -- Elements container
            local ElementsContainer = Instance.new("Frame")
            ElementsContainer.Name = "ElementsContainer"
            ElementsContainer.Size = UDim2.new(1, 0, 0, 0)
            ElementsContainer.BackgroundTransparency = 1
            ElementsContainer.BorderSizePixel = 0
            ElementsContainer.Parent = TabContent
            
            local ElementsLayout = Instance.new("UIListLayout")
            ElementsLayout.Padding = UDim.new(0, 4)
            ElementsLayout.Parent = ElementsContainer
            
            -- Toggle element
            function Section:CreateToggle(config)
                config = config or {}
                
                local Toggle = {
                    Name = config.Name or "Toggle",
                    Value = config.Default or false,
                    Callback = config.Callback or function() end,
                }
                
                local ToggleFrame = Instance.new("Frame")
                ToggleFrame.Name = Toggle.Name
                ToggleFrame.Size = UDim2.new(1, -10, 0, 28)
                ToggleFrame.Position = UDim2.new(0, 5, 0, 0)
                ToggleFrame.BackgroundColor3 = Color3.fromRGB(35, 37, 37)
                ToggleFrame.BorderSizePixel = 1
                ToggleFrame.BorderColor3 = Color3.fromRGB(50, 50, 60)
                ToggleFrame.Parent = ElementsContainer
                
                local ToggleCorner = Instance.new("UICorner")
                ToggleCorner.CornerRadius = UDim.new(0, 6)
                ToggleCorner.Parent = ToggleFrame
                
                local ToggleLabel = Instance.new("TextLabel")
                ToggleLabel.Name = "Label"
                ToggleLabel.Size = UDim2.new(1, -50, 1, 0)
                ToggleLabel.Position = UDim2.new(0, 10, 0, 0)
                ToggleLabel.BackgroundTransparency = 1
                ToggleLabel.TextColor3 = Color3.fromRGB(200, 200, 210)
                ToggleLabel.TextSize = 12
                ToggleLabel.Font = Enum.Font.Gotham
                ToggleLabel.Text = Toggle.Name
                ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left
                ToggleLabel.Parent = ToggleFrame
                
                local ToggleButton = Instance.new("TextButton")
                ToggleButton.Name = "ToggleButton"
                ToggleButton.Size = UDim2.new(0, 40, 0, 20)
                ToggleButton.Position = UDim2.new(1, -45, 0.5, -10)
                ToggleButton.BackgroundColor3 = Toggle.Value and CasualHub.AccentColor or Color3.fromRGB(60, 60, 70)
                ToggleButton.TextSize = 0
                ToggleButton.BorderSizePixel = 0
                ToggleButton.Parent = ToggleFrame
                
                local ToggleButtonCorner = Instance.new("UICorner")
                ToggleButtonCorner.CornerRadius = UDim.new(0, 4)
                ToggleButtonCorner.Parent = ToggleButton
                
                ToggleButton.MouseButton1Click:Connect(function()
                    Toggle.Value = not Toggle.Value
                    ToggleButton.BackgroundColor3 = Toggle.Value and CasualHub.AccentColor or Color3.fromRGB(60, 60, 70)
                    Toggle.Callback(Toggle.Value)
                end)
                
                table.insert(Section.Elements, Toggle)
                return Toggle
            end
            
            -- Slider element
            function Section:CreateSlider(config)
                config = config or {}
                
                local Slider = {
                    Name = config.Name or "Slider",
                    Min = config.Min or 0,
                    Max = config.Max or 100,
                    Value = config.Default or 50,
                    Callback = config.Callback or function() end,
                }
                
                local SliderFrame = Instance.new("Frame")
                SliderFrame.Name = Slider.Name
                SliderFrame.Size = UDim2.new(1, -10, 0, 50)
                SliderFrame.Position = UDim2.new(0, 5, 0, 0)
                SliderFrame.BackgroundColor3 = Color3.fromRGB(35, 37, 37)
                SliderFrame.BorderSizePixel = 1
                SliderFrame.BorderColor3 = Color3.fromRGB(50, 50, 60)
                SliderFrame.Parent = ElementsContainer
                
                local SliderCorner = Instance.new("UICorner")
                SliderCorner.CornerRadius = UDim.new(0, 6)
                SliderCorner.Parent = SliderFrame
                
                local SliderLabel = Instance.new("TextLabel")
                SliderLabel.Name = "Label"
                SliderLabel.Size = UDim2.new(1, -60, 0, 18)
                SliderLabel.Position = UDim2.new(0, 10, 0, 5)
                SliderLabel.BackgroundTransparency = 1
                SliderLabel.TextColor3 = Color3.fromRGB(200, 200, 210)
                SliderLabel.TextSize = 12
                SliderLabel.Font = Enum.Font.Gotham
                SliderLabel.Text = Slider.Name
                SliderLabel.TextXAlignment = Enum.TextXAlignment.Left
                SliderLabel.Parent = SliderFrame
                
                local SliderValue = Instance.new("TextLabel")
                SliderValue.Name = "Value"
                SliderValue.Size = UDim2.new(0, 50, 0, 18)
                SliderValue.Position = UDim2.new(1, -55, 0, 5)
                SliderValue.BackgroundTransparency = 1
                SliderValue.TextColor3 = CasualHub.AccentColor
                SliderValue.TextSize = 12
                SliderValue.Font = Enum.Font.GothamBold
                SliderValue.Text = tostring(Slider.Value)
                SliderValue.TextXAlignment = Enum.TextXAlignment.Right
                SliderValue.Parent = SliderFrame
                
                local SliderBackground = Instance.new("Frame")
                SliderBackground.Name = "Background"
                SliderBackground.Size = UDim2.new(1, -20, 0, 6)
                SliderBackground.Position = UDim2.new(0, 10, 0, 28)
                SliderBackground.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
                SliderBackground.BorderSizePixel = 0
                SliderBackground.Parent = SliderFrame
                
                local SliderBarCorner = Instance.new("UICorner")
                SliderBarCorner.CornerRadius = UDim.new(0, 3)
                SliderBarCorner.Parent = SliderBackground
                
                local SliderBar = Instance.new("Frame")
                SliderBar.Name = "Bar"
                SliderBar.Size = UDim2.new((Slider.Value - Slider.Min) / (Slider.Max - Slider.Min), 0, 1, 0)
                SliderBar.BackgroundColor3 = CasualHub.AccentColor
                SliderBar.BorderSizePixel = 0
                SliderBar.Parent = SliderBackground
                
                local SliderBarCornerInner = Instance.new("UICorner")
                SliderBarCornerInner.CornerRadius = UDim.new(0, 3)
                SliderBarCornerInner.Parent = SliderBar
                
                local function UpdateSlider(input)
                    local sliderPos = SliderBackground.AbsolutePosition.X
                    local sliderSize = SliderBackground.AbsoluteSize.X
                    local mouseX = input.Position.X
                    
                    local relativeX = math.clamp(mouseX - sliderPos, 0, sliderSize)
                    local percentage = relativeX / sliderSize
                    local newValue = math.floor(Slider.Min + (Slider.Max - Slider.Min) * percentage)
                    
                    Slider.Value = newValue
                    SliderBar.Size = UDim2.new(percentage, 0, 1, 0)
                    SliderValue.Text = tostring(newValue)
                    Slider.Callback(newValue)
                end
                
                SliderBackground.InputBegan:Connect(function(input, gameProcessed)
                    if input.UserInputType == Enum.UserInputType.MouseButton1 then
                        UpdateSlider(input)
                    end
                end)
                
                UserInputService.InputChanged:Connect(function(input, gameProcessed)
                    if input.UserInputType == Enum.UserInputType.MouseMovement then
                        if SliderBackground:FindFirstChild("_dragging") or SliderBackground.AbsoluteSize.X > 0 then
                            local mouse = game.Players.LocalPlayer:GetMouse()
                            if mouse.Target == SliderBackground or SliderBackground:IsDescendantOf(mouse.Target) then
                                UpdateSlider(input)
                            end
                        end
                    end
                end)
                
                table.insert(Section.Elements, Slider)
                return Slider
            end
            
            -- Dropdown element
            function Section:CreateDropdown(config)
                config = config or {}
                
                local Dropdown = {
                    Name = config.Name or "Dropdown",
                    Options = config.Options or {"Option 1", "Option 2"},
                    Value = config.Default or config.Options[1],
                    Callback = config.Callback or function() end,
                    Open = false,
                }
                
                local DropdownFrame = Instance.new("Frame")
                DropdownFrame.Name = Dropdown.Name
                DropdownFrame.Size = UDim2.new(1, -10, 0, 28)
                DropdownFrame.Position = UDim2.new(0, 5, 0, 0)
                DropdownFrame.BackgroundColor3 = Color3.fromRGB(35, 37, 37)
                DropdownFrame.BorderSizePixel = 1
                DropdownFrame.BorderColor3 = Color3.fromRGB(50, 50, 60)
                DropdownFrame.Parent = ElementsContainer
                
                local DropdownCorner = Instance.new("UICorner")
                DropdownCorner.CornerRadius = UDim.new(0, 6)
                DropdownCorner.Parent = DropdownFrame
                
                local DropdownLabel = Instance.new("TextLabel")
                DropdownLabel.Name = "Label"
                DropdownLabel.Size = UDim2.new(0.5, -10, 1, 0)
                DropdownLabel.Position = UDim2.new(0, 10, 0, 0)
                DropdownLabel.BackgroundTransparency = 1
                DropdownLabel.TextColor3 = Color3.fromRGB(200, 200, 210)
                DropdownLabel.TextSize = 12
                DropdownLabel.Font = Enum.Font.Gotham
                DropdownLabel.Text = Dropdown.Name
                DropdownLabel.TextXAlignment = Enum.TextXAlignment.Left
                DropdownLabel.Parent = DropdownFrame
                
                local DropdownValue = Instance.new("TextButton")
                DropdownValue.Name = "Value"
                DropdownValue.Size = UDim2.new(0.4, -20, 1, -4)
                DropdownValue.Position = UDim2.new(0.6, 0, 0, 2)
                DropdownValue.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
                DropdownValue.TextColor3 = CasualHub.AccentColor
                DropdownValue.TextSize = 11
                DropdownValue.Font = Enum.Font.Gotham
                DropdownValue.Text = Dropdown.Value
                DropdownValue.BorderSizePixel = 0
                DropdownValue.Parent = DropdownFrame
                
                local DropdownValueCorner = Instance.new("UICorner")
                DropdownValueCorner.CornerRadius = UDim.new(0, 4)
                DropdownValueCorner.Parent = DropdownValue
                
                local DropdownMenu = Instance.new("Frame")
                DropdownMenu.Name = "Menu"
                DropdownMenu.Size = UDim2.new(0.4, -20, 0, #Dropdown.Options * 26)
                DropdownMenu.Position = UDim2.new(0.6, 0, 1, 4)
                DropdownMenu.BackgroundColor3 = Color3.fromRGB(45, 47, 47)
                DropdownMenu.BorderSizePixel = 1
                DropdownMenu.BorderColor3 = Color3.fromRGB(50, 50, 60)
                DropdownMenu.Visible = false
                DropdownMenu.ZIndex = 100
                DropdownMenu.Parent = DropdownFrame
                
                local DropdownMenuCorner = Instance.new("UICorner")
                DropdownMenuCorner.CornerRadius = UDim.new(0, 4)
                DropdownMenuCorner.Parent = DropdownMenu
                
                local DropdownLayout = Instance.new("UIListLayout")
                DropdownLayout.Padding = UDim.new(0, 0)
                DropdownLayout.Parent = DropdownMenu
                
                for _, option in ipairs(Dropdown.Options) do
                    local OptionButton = Instance.new("TextButton")
                    OptionButton.Name = option
                    OptionButton.Size = UDim2.new(1, 0, 0, 26)
                    OptionButton.BackgroundColor3 = Color3.fromRGB(45, 47, 47)
                    OptionButton.TextColor3 = Color3.fromRGB(150, 150, 160)
                    OptionButton.TextSize = 11
                    OptionButton.Font = Enum.Font.Gotham
                    OptionButton.Text = option
                    OptionButton.BorderSizePixel = 0
                    OptionButton.Parent = DropdownMenu
                    
                    OptionButton.MouseButton1Click:Connect(function()
                        Dropdown.Value = option
                        DropdownValue.Text = option
                        DropdownMenu.Visible = false
                        Dropdown.Open = false
                        Dropdown.Callback(option)
                    end)
                    
                    OptionButton.MouseEnter:Connect(function()
                        OptionButton.BackgroundColor3 = CasualHub.AccentColor
                        OptionButton.TextColor3 = Color3.fromRGB(255, 255, 255)
                    end)
                    
                    OptionButton.MouseLeave:Connect(function()
                        OptionButton.BackgroundColor3 = Color3.fromRGB(45, 47, 47)
                        OptionButton.TextColor3 = Color3.fromRGB(150, 150, 160)
                    end)
                end
                
                DropdownValue.MouseButton1Click:Connect(function()
                    Dropdown.Open = not Dropdown.Open
                    DropdownMenu.Visible = Dropdown.Open
                end)
                
                table.insert(Section.Elements, Dropdown)
                return Dropdown
            end
            
            -- Keybind element
            function Section:CreateKeybind(config)
                config = config or {}
                
                local Keybind = {
                    Name = config.Name or "Keybind",
                    Key = config.Default or Enum.KeyCode.Unknown,
                    Callback = config.Callback or function() end,
                }
                
                local KeybindFrame = Instance.new("Frame")
                KeybindFrame.Name = Keybind.Name
                KeybindFrame.Size = UDim2.new(1, -10, 0, 28)
                KeybindFrame.Position = UDim2.new(0, 5, 0, 0)
                KeybindFrame.BackgroundColor3 = Color3.fromRGB(35, 37, 37)
                KeybindFrame.BorderSizePixel = 1
                KeybindFrame.BorderColor3 = Color3.fromRGB(50, 50, 60)
                KeybindFrame.Parent = ElementsContainer
                
                local KeybindCorner = Instance.new("UICorner")
                KeybindCorner.CornerRadius = UDim.new(0, 6)
                KeybindCorner.Parent = KeybindFrame
                
                local KeybindLabel = Instance.new("TextLabel")
                KeybindLabel.Name = "Label"
                KeybindLabel.Size = UDim2.new(0.5, -10, 1, 0)
                KeybindLabel.Position = UDim2.new(0, 10, 0, 0)
                KeybindLabel.BackgroundTransparency = 1
                KeybindLabel.TextColor3 = Color3.fromRGB(200, 200, 210)
                KeybindLabel.TextSize = 12
                KeybindLabel.Font = Enum.Font.Gotham
                KeybindLabel.Text = Keybind.Name
                KeybindLabel.TextXAlignment = Enum.TextXAlignment.Left
                KeybindLabel.Parent = KeybindFrame
                
                local KeybindButton = Instance.new("TextButton")
                KeybindButton.Name = "Button"
                KeybindButton.Size = UDim2.new(0.4, -20, 1, -4)
                KeybindButton.Position = UDim2.new(0.6, 0, 0, 2)
                KeybindButton.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
                KeybindButton.TextColor3 = CasualHub.AccentColor
                KeybindButton.TextSize = 11
                KeybindButton.Font = Enum.Font.Gotham
                KeybindButton.Text = Keybind.Key.Name
                KeybindButton.BorderSizePixel = 0
                KeybindButton.Parent = KeybindFrame
                
                local KeybindButtonCorner = Instance.new("UICorner")
                KeybindButtonCorner.CornerRadius = UDim.new(0, 4)
                KeybindButtonCorner.Parent = KeybindButton
                
                local listening = false
                
                KeybindButton.MouseButton1Click:Connect(function()
                    listening = true
                    KeybindButton.Text = "Press a key..."
                    KeybindButton.TextColor3 = Color3.fromRGB(255, 150, 50)
                end)
                
                UserInputService.InputBegan:Connect(function(input, gameProcessed)
                    if listening then
                        if input.UserInputType == Enum.UserInputType.Keyboard then
                            Keybind.Key = input.KeyCode
                            KeybindButton.Text = Keybind.Key.Name
                            KeybindButton.TextColor3 = CasualHub.AccentColor
                            listening = false
                            Keybind.Callback(Keybind.Key)
                        end
                    end
                end)
                
                table.insert(Section.Elements, Keybind)
                return Keybind
            end
            
            -- Text input element
            function Section:CreateTextBox(config)
                config = config or {}
                
                local TextBox = {
                    Name = config.Name or "TextBox",
                    Value = config.Default or "",
                    Callback = config.Callback or function() end,
                }
                
                local TextBoxFrame = Instance.new("Frame")
                TextBoxFrame.Name = TextBox.Name
                TextBoxFrame.Size = UDim2.new(1, -10, 0, 28)
                TextBoxFrame.Position = UDim2.new(0, 5, 0, 0)
                TextBoxFrame.BackgroundColor3 = Color3.fromRGB(35, 37, 37)
                TextBoxFrame.BorderSizePixel = 1
                TextBoxFrame.BorderColor3 = Color3.fromRGB(50, 50, 60)
                TextBoxFrame.Parent = ElementsContainer
                
                local TextBoxCorner = Instance.new("UICorner")
                TextBoxCorner.CornerRadius = UDim.new(0, 6)
                TextBoxCorner.Parent = TextBoxFrame
                
                local TextBoxLabel = Instance.new("TextLabel")
                TextBoxLabel.Name = "Label"
                TextBoxLabel.Size = UDim2.new(0.3, -10, 1, 0)
                TextBoxLabel.Position = UDim2.new(0, 10, 0, 0)
                TextBoxLabel.BackgroundTransparency = 1
                TextBoxLabel.TextColor3 = Color3.fromRGB(200, 200, 210)
                TextBoxLabel.TextSize = 12
                TextBoxLabel.Font = Enum.Font.Gotham
                TextBoxLabel.Text = TextBox.Name
                TextBoxLabel.TextXAlignment = Enum.TextXAlignment.Left
                TextBoxLabel.Parent = TextBoxFrame
                
                local TextBoxInput = Instance.new("TextBox")
                TextBoxInput.Name = "Input"
                TextBoxInput.Size = UDim2.new(0.65, -20, 1, -4)
                TextBoxInput.Position = UDim2.new(0.35, 0, 0, 2)
                TextBoxInput.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
                TextBoxInput.TextColor3 = CasualHub.AccentColor
                TextBoxInput.TextSize = 11
                TextBoxInput.Font = Enum.Font.Gotham
                TextBoxInput.Text = TextBox.Value
                TextBoxInput.ClearTextOnFocus = false
                TextBoxInput.BorderSizePixel = 0
                TextBoxInput.Parent = TextBoxFrame
                
                local TextBoxCornerInput = Instance.new("UICorner")
                TextBoxCornerInput.CornerRadius = UDim.new(0, 4)
                TextBoxCornerInput.Parent = TextBoxInput
                
                TextBoxInput.FocusLost:Connect(function(enterPressed)
                    TextBox.Value = TextBoxInput.Text
                    TextBox.Callback(TextBox.Value)
                end)
                
                table.insert(Section.Elements, TextBox)
                return TextBox
            end
            
            -- Label element
            function Section:CreateLabel(config)
                config = config or {}
                
                local Label = {
                    Text = config.Text or "Label",
                }
                
                local LabelFrame = Instance.new("TextLabel")
                LabelFrame.Name = "Label"
                LabelFrame.Size = UDim2.new(1, -10, 0, 20)
                LabelFrame.Position = UDim2.new(0, 5, 0, 0)
                LabelFrame.BackgroundTransparency = 1
                LabelFrame.TextColor3 = Color3.fromRGB(150, 150, 160)
                LabelFrame.TextSize = 11
                LabelFrame.Font = Enum.Font.Gotham
                LabelFrame.Text = Label.Text
                LabelFrame.TextXAlignment = Enum.TextXAlignment.Left
                LabelFrame.Parent = ElementsContainer
                
                table.insert(Section.Elements, Label)
                return Label
            end
            
            -- Button element
            function Section:CreateButton(config)
                config = config or {}
                
                local Button = {
                    Name = config.Name or "Button",
                    Callback = config.Callback or function() end,
                }
                
                local ButtonFrame = Instance.new("TextButton")
                ButtonFrame.Name = Button.Name
                ButtonFrame.Size = UDim2.new(1, -10, 0, 28)
                ButtonFrame.Position = UDim2.new(0, 5, 0, 0)
                ButtonFrame.BackgroundColor3 = CasualHub.AccentColor
                ButtonFrame.TextColor3 = Color3.fromRGB(255, 255, 255)
                ButtonFrame.TextSize = 12
                ButtonFrame.Font = Enum.Font.GothamBold
                ButtonFrame.Text = Button.Name
                ButtonFrame.BorderSizePixel = 0
                ButtonFrame.Parent = ElementsContainer
                
                local ButtonCorner = Instance.new("UICorner")
                ButtonCorner.CornerRadius = UDim.new(0, 6)
                ButtonCorner.Parent = ButtonFrame
                
                ButtonFrame.MouseButton1Click:Connect(function()
                    Button.Callback()
                end)
                
                ButtonFrame.MouseEnter:Connect(function()
                    ButtonFrame.BackgroundColor3 = Color3.fromRGB(158, 112, 266)
                end)
                
                ButtonFrame.MouseLeave:Connect(function()
                    ButtonFrame.BackgroundColor3 = CasualHub.AccentColor
                end)
                
                table.insert(Section.Elements, Button)
                return Button
            end
            
            table.insert(Tab.Sections, Section)
            return Section
        end
        
        table.insert(Window.Tabs, Tab)
        return Tab
    end
    
    -- Notification system
    function Window:Notify(config)
        config = config or {}
        
        local Notification = {
            Title = config.Title or "Notification",
            Message = config.Message or "Message",
            Type = config.Type or "Info",
            Duration = config.Duration or 5,
        }
        
        local NotificationFrame = Instance.new("Frame")
        NotificationFrame.Name = "Notification"
        NotificationFrame.Size = UDim2.new(0, 300, 0, 80)
        NotificationFrame.Position = UDim2.new(1, -320, 1, -100)
        NotificationFrame.BackgroundColor3 = Color3.fromRGB(35, 37, 37)
        NotificationFrame.BorderSizePixel = 1
        NotificationFrame.BorderColor3 = Color3.fromRGB(50, 50, 60)
        NotificationFrame.Parent = ScreenGui
        
        local NotificationCorner = Instance.new("UICorner")
        NotificationCorner.CornerRadius = UDim.new(0, 8)
        NotificationCorner.Parent = NotificationFrame
        
        local TitleLabel = Instance.new("TextLabel")
        TitleLabel.Name = "Title"
        TitleLabel.Size = UDim2.new(1, -10, 0, 20)
        TitleLabel.Position = UDim2.new(0, 10, 0, 5)
        TitleLabel.BackgroundTransparency = 1
        TitleLabel.TextColor3 = CasualHub.AccentColor
        TitleLabel.TextSize = 12
        TitleLabel.Font = Enum.Font.GothamBold
        TitleLabel.Text = Notification.Title
        TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
        TitleLabel.Parent = NotificationFrame
        
        local MessageLabel = Instance.new("TextLabel")
        MessageLabel.Name = "Message"
        MessageLabel.Size = UDim2.new(1, -10, 0, 40)
        MessageLabel.Position = UDim2.new(0, 10, 0, 30)
        MessageLabel.BackgroundTransparency = 1
        MessageLabel.TextColor3 = Color3.fromRGB(150, 150, 160)
        MessageLabel.TextSize = 10
        MessageLabel.Font = Enum.Font.Gotham
        MessageLabel.Text = Notification.Message
        MessageLabel.TextWrapped = true
        MessageLabel.TextXAlignment = Enum.TextXAlignment.Left
        MessageLabel.Parent = NotificationFrame
        
        task.wait(Notification.Duration)
        NotificationFrame:Destroy()
    end
    
    -- Theme change callback
    function Window:OnThemeChange(callback)
        table.insert(CasualHub.ThemeCallbacks, callback)
    end
    
    -- Get/Set title
    function Window:SetTitle(text)
        Window.Title = text
        TitleLabel.Text = text
    end
    
    function Window:SetSubTitle(text)
        Window.SubTitle = text
        SubTitleLabel.Text = text
    end
    
    function Window:SetLogo(text)
        Window.Logo = text
        LogoLabel.Text = text
    end
    
    -- Get accent color
    function CasualHub:GetAccentColor()
        return self.AccentColor
    end
    
    -- Set accent color
    function CasualHub:SetAccentColor(color)
        self.AccentColor = color
        for _, callback in ipairs(self.ThemeCallbacks) do
            callback(color, self.Theme)
        end
    end
    
    table.insert(CasualHub.Windows, Window)
    return Window
end

-- Export
return CasualHub
